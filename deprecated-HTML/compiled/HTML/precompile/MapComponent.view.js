"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var react_leaflet_1 = require("react-leaflet");
var models_1 = require("./models");
var ControlsLayer_1 = require("./ControlsLayer");
var RasterLayer_1 = require("./RasterLayer");
require("leaflet/dist/leaflet.css");
require("leaflet/dist/images/marker-icon-2x.png");
require("leaflet/dist/images/marker-shadow.png");
require("./markers.css");
var VectorLayers_1 = require("./VectorLayers");
require('react-leaflet-markercluster/dist/styles.min.css');
var SHOW_DEBUG_INFORMATION = true;
var ENABLE_BROWSER_TESTING = true;
var MapComponentView = function (_a) {
    var addDebugMessage = _a.addDebugMessage, vectorLayers = _a.vectorLayers, boundsOptions = _a.boundsOptions, bounds = _a.bounds, panToLocation = _a.panToLocation, showZoomControl = _a.showZoomControl, showAttributionControl = _a.showAttributionControl, mapCenterCoords = _a.mapCenterCoords, debugMessages = _a.debugMessages, isLoaded = _a.isLoaded, lat = _a.lat, lng = _a.lng, _b = _a.mapRasterLayers, mapRasterLayers = _b === void 0 ? [] : _b, _c = _a.mapMarkers, mapMarkers = _c === void 0 ? [] : _c, onClick = _a.onClick, onWhenReady = _a.onWhenReady, onMapEvent = _a.onMapEvent, onMapRef = _a.onMapRef, ownPositionMarker = _a.ownPositionMarker, useMarkerClustering = _a.useMarkerClustering, zoom = _a.zoom;
    return (React.createElement(React.Fragment, null,
        mapRasterLayers.length < 1 ? (React.createElement("div", null, "waiting for map layers")) : (React.createElement(react_leaflet_1.Map, { style: {
                width: '100%',
                backgroundColor: 'lightblue'
            }, zoom: zoom, ref: function (component) {
                onMapRef(component);
            }, center: mapCenterCoords, attributionControl: showAttributionControl, zoomControl: showZoomControl, panToLocation: panToLocation, maxZoom: 18, bounds: bounds, boundsOptions: boundsOptions, whenReady: onWhenReady, onClick: onClick, onZoomLevelsChange: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM_LEVELS_CHANGE);
            }, onResize: function () {
                onMapEvent(models_1.MapEvent.ON_RESIZE);
            }, onZoomStart: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM_START);
            }, onMoveStart: function () {
                onMapEvent(models_1.MapEvent.ON_MOVE_START);
            }, onZoom: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM);
            }, onMove: function () {
                onMapEvent(models_1.MapEvent.ON_MOVE);
            }, onZoomEnd: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM_END);
            }, onMoveEnd: function () {
                onMapEvent(models_1.MapEvent.ON_MOVE);
            }, onUnload: function () {
                onMapEvent(models_1.MapEvent.ON_UNLOAD);
            }, onViewReset: function () {
                onMapEvent(models_1.MapEvent.ON_VIEW_RESET);
            } },
            mapRasterLayers.length === 1 ? (React.createElement(RasterLayer_1.default, { layer: mapRasterLayers[0], addDebugMessage: addDebugMessage })) : (React.createElement(react_leaflet_1.LayersControl, { position: "topright" },
                React.createElement(ControlsLayer_1.default, { mapRasterLayers: mapRasterLayers, addDebugMessage: addDebugMessage }))),
            isLoaded && !!vectorLayers.length && (React.createElement(VectorLayers_1.default, { addDebugMessage: addDebugMessage, debugMessages: debugMessages, vectorLayers: vectorLayers })))),
        SHOW_DEBUG_INFORMATION ? (React.createElement("div", { style: {
                backgroundColor: 'orange',
                maxHeight: '200px',
                overflow: 'auto',
                padding: 5,
                position: 'fixed',
                bottom: 0,
                left: 0,
                right: 0,
                zIndex: 15000
            }, id: "messages" },
            React.createElement("ul", null, debugMessages.map(function (message, index) {
                return React.createElement("li", { key: index }, message);
            })))) : null));
};
exports.default = MapComponentView;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFwQ29tcG9uZW50LnZpZXcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9wcmVjb21waWxlL01hcENvbXBvbmVudC52aWV3LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZCQUErQjtBQUMvQiwrQ0FBZ0Y7QUFFaEYsbUNBU2tCO0FBQ2xCLGlEQUE0QztBQUM1Qyw2Q0FBd0M7QUFDeEMsb0NBQWtDO0FBQ2xDLGtEQUFnRDtBQUNoRCxpREFBK0M7QUFDL0MseUJBQXVCO0FBQ3ZCLCtDQUEwQztBQUkxQyxPQUFPLENBQUMsaURBQWlELENBQUMsQ0FBQztBQStCM0QsSUFBTSxzQkFBc0IsR0FBRyxJQUFJLENBQUM7QUFDcEMsSUFBTSxzQkFBc0IsR0FBRyxJQUFJLENBQUM7QUFFcEMsSUFBTSxnQkFBZ0IsR0FBRyxVQUFDLEVBc0JsQjtRQXJCTixvQ0FBZSxFQUNmLDhCQUFZLEVBQ1osZ0NBQWEsRUFDYixrQkFBTSxFQUNOLGdDQUFhLEVBQ2Isb0NBQWUsRUFDZixrREFBc0IsRUFDdEIsb0NBQWUsRUFDZixnQ0FBYSxFQUNiLHNCQUFRLEVBQ1IsWUFBRyxFQUNILFlBQUcsRUFDSCx1QkFBb0IsRUFBcEIseUNBQW9CLEVBQ3BCLGtCQUFlLEVBQWYsb0NBQWUsRUFDZixvQkFBTyxFQUNQLDRCQUFXLEVBQ1gsMEJBQVUsRUFDVixzQkFBUSxFQUNSLHdDQUFpQixFQUNqQiw0Q0FBbUIsRUFDbkIsY0FBSTtJQUVKLE9BQU8sQ0FDTDtRQUNHLGVBQWUsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUM1QiwwREFBaUMsQ0FDbEMsQ0FBQyxDQUFDLENBQUMsQ0FDRixvQkFBQyxtQkFBRyxJQUNGLEtBQUssRUFBRTtnQkFDTCxLQUFLLEVBQUUsTUFBTTtnQkFDYixlQUFlLEVBQUUsV0FBVzthQUM3QixFQUNELElBQUksRUFBRSxJQUFJLEVBQ1YsR0FBRyxFQUFFLFVBQUMsU0FBUztnQkFDYixRQUFRLENBQUMs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WyJpbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IE1hcCwgTGF5ZXJzQ29udHJvbCwgUG9seWxpbmUsIFRpbGVMYXllciwgQ2lyY2xlIH0gZnJvbSAncmVhY3QtbGVhZmxldCc7XHJcbmltcG9ydCB7IExhdExuZ0V4cHJlc3Npb24sIExlYWZsZXRNb3VzZUV2ZW50IH0gZnJvbSAnbGVhZmxldCc7XHJcbmltcG9ydCB7XHJcbiAgTWFwTWFya2VyLFxyXG4gIE1hcEV2ZW50LFxyXG4gIE1hcFZlY3RvckxheWVyQ2lyY2xlLFxyXG4gIE1hcFZlY3RvckxheWVyQ2lyY2xlTWFya2VyLFxyXG4gIE1hcFZlY3RvckxheWVyUG9seWxpbmUsXHJcbiAgTWFwVmVjdG9yTGF5ZXJQb2x5Z29uLFxyXG4gIE1hcFZlY3RvckxheWVyUmVjdGFuZ2xlLFxyXG4gIE1hcFJhc3RlckxheWVyXHJcbn0gZnJvbSAnLi9tb2RlbHMnO1xyXG5pbXBvcnQgQ29udHJvbHNMYXllciBmcm9tICcuL0NvbnRyb2xzTGF5ZXInO1xyXG5pbXBvcnQgUmFzdGVyTGF5ZXIgZnJvbSAnLi9SYXN0ZXJMYXllcic7XHJcbmltcG9ydCAnbGVhZmxldC9kaXN0L2xlYWZsZXQuY3NzJztcclxuaW1wb3J0ICdsZWFmbGV0L2Rpc3QvaW1hZ2VzL21hcmtlci1pY29uLTJ4LnBuZyc7XHJcbmltcG9ydCAnbGVhZmxldC9kaXN0L2ltYWdlcy9tYXJrZXItc2hhZG93LnBuZyc7XHJcbmltcG9ydCAnLi9tYXJrZXJzLmNzcyc7XHJcbmltcG9ydCBWZWN0b3JMYXllcnMgZnJvbSAnLi9WZWN0b3JMYXllcnMnO1xyXG5pbXBvcnQgTWFwTWFya2VycyBmcm9tICcuL01hcmtlcnMnO1xyXG5pbXBvcnQgVmVjdG9yTGF5ZXJzIGZyb20gJy4uL3ByZWNvbXBpbGUvVmVjdG9yTGF5ZXJzJztcclxuXHJcbnJlcXVpcmUoJ3JlYWN0LWxlYWZsZXQtbWFya2VyY2x1c3Rlci9kaXN0L3N0eWxlcy5taW4uY3NzJyk7XHJcblxyXG5pbnRlcmZhY2UgUHJvcHMge1xyXG4gIGFkZERlYnVnTWVzc2FnZTogKG1zZzogYW55KSA9PiB2b2lkO1xyXG4gIGJvdW5kc09wdGlvbnM6IGFueTtcclxuICBib3VuZHM6IGFueTtcclxuICBwYW5Ub0xvY2F0aW9uOiBhbnk7XHJcbiAgc2hvd1pvb21Db250cm9sOiBib29sZWFuO1xyXG4gIHNob3dBdHRyaWJ1dGlvbkNvbnRyb2w6IGJvb2xlYW47XHJcbiAgbWFwQ2VudGVyQ29vcmRzOiBMYXRMbmdFeHByZXNzaW9uO1xyXG4gIGRlYnVnTWVzc2FnZXM6IHN0cmluZ1tdO1xyXG4gIGlzTG9hZGVkOiBib29sZWFuO1xyXG4gIGxhdDogbnVtYmVyO1xyXG4gIGxuZzogbnVtYmVyO1xyXG4gIG1hcFJhc3RlckxheWVycz86IE1hcFJhc3RlckxheWVyW107XHJcbiAgbWFwTWFya2Vycz86IE1hcE1hcmtlcltdO1xyXG4gIG9uQ2xpY2s6IChldmVudDogTGVhZmxldE1vdXNlRXZlbnQpID0+IHZvaWQ7XHJcbiAgb25NYXBFdmVudDogKG1hcEV2ZW50OiBNYXBFdmVudCkgPT4gdm9pZDtcclxuICBvbk1hcFJlZjogKG1hcFJlZjogYW55KSA9PiB2b2lkO1xyXG4gIG9uV2hlblJlYWR5OiAoKSA9PiB2b2lkO1xyXG4gIG93blBvc2l0aW9uTWFya2VyOiBNYXBNYXJrZXI7XHJcbiAgdXNlTWFya2VyQ2x1c3RlcmluZzogYm9vbGVhbjtcclxuICB2ZWN0b3JMYXllcnM6IChcclxuICAgIHwgTWFwVmVjdG9yTGF5ZXJDaXJjbGVcclxuICAgIHwgTWFwVmVjdG9yTGF5ZXJDaXJjbGVNYXJrZXJcclxuICAgIHwgTWFwVmVjdG9yTGF5ZXJQb2x5bGluZVxyXG4gICAgfCBNYXBWZWN0b3JMYXllclBvbHlnb25cclxuICAgIHwgTWFwVmVjdG9yTGF5ZXJSZWN0YW5nbGVcclxuICApW107XHJcbiAgem9vbTogbnVtYmVyO1xyXG59XHJcbmNvbnN0IFNIT1dfREVCVUdfSU5GT1JNQVRJT04gPSB0cnVlO1xyXG5jb25zdCBFTkFCTEVfQlJPV1NFUl9URVNUSU5HID0gdHJ1ZTtcclxuXHJcbmNvbnN0IE1hcENvbXBvbmVudFZpZXcgPSAoe1xyXG4gIGFkZERlYnVnTWVzc2FnZSxcclxuICB2ZWN0b3JMYXllcnMsXHJcbiAgYm91bmRzT3B0aW9ucyxcclxuICBib3VuZHMsXHJcbiAgcGFuVG9Mb2NhdGlvbixcclxuICBzaG93Wm9vbUNvbnRyb2wsXHJcbiAgc2hvd0F0dHJpYnV0aW9uQ29udHJvbCxcclxuICBtYXBDZW50ZXJDb29yZHMsXHJcbiAgZGVidWdNZXNzYWdlcyxcclxuICBpc0xvYWRlZCxcclxuICBsYXQsXHJcbiAgbG5nLFxyXG4gIG1hcFJhc3RlckxheWVycyA9IFtdLFxyXG4gIG1hcE1hcmtlcnMgPSBbXSxcclxuICBvbkNsaWNrLFxyXG4gIG9uV2hlblJlYWR5LFxyXG4gIG9uTWFwRXZlbnQsXHJcbiAgb25NYXBSZWYsXHJcbiAgb3duUG9zaXRpb25NYXJrZXIsXHJcbiAgdXNlTWFya2VyQ2x1c3RlcmluZyxcclxuICB6b29tXHJcbn06IFByb3BzKSA9PiB7XHJcbiAgcmV0dXJuIChcclxuICAgIDw+XHJcbiAgICAgIHttYXBSYXN0ZXJMYXllcnMubGVuZ3RoIDwgMSA/IChcclxuICAgICAgICA8ZGl2PndhaXRpbmcgZm9yIG1hcCBsYXllcnM8L2Rpdj5cclxuICAgICAgKSA6IChcclxuICAgICAgICA8TWFwXHJcbiAgICAgICAgICBzdHlsZT17e1xyXG4gICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICdsaWdodGJsdWUnXHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgem9vbT17em9vbX1cclxuICAgICAgICAgIHJlZj17KGNvbXBvbmVudCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcFJlZihjb21wb25lbnQpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIGNlbnRlcj17bWFwQ2VudGVyQ29vcmRzfVxyXG4gICAgICAgICAgYXR0cmlidXRpb25Db250cm9sPXtzaG93QXR0cmlidXRpb25Db250cm9sfVxyXG4gICAgICAgICAgem9vbUNvbnRyb2w9e3Nob3dab29tQ29udHJvbH1cclxuICAgICAgICAgIHBhblRvTG9jYXRpb249e3BhblRvTG9jYXRpb259XHJcbiAgICAgICAgICBtYXhab29tPXsxOH1cclxuICAgICAgICAgIGJvdW5kcz17Ym91bmRzfVxyXG4gICAgICAgICAgYm91bmRzT3B0aW9ucz17Ym91bmRzT3B0aW9uc31cclxuICAgICAgICAgIHdoZW5SZWFkeT17b25XaGVuUmVhZHl9XHJcbiAgICAgICAgICBvbkNsaWNrPXtvbkNsaWNrfVxyXG4gICAgICAgICAgb25ab29tTGV2ZWxzQ2hhbmdlPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwRXZlbnQoTWFwRXZlbnQuT05fWk9PTV9MRVZFTFNfQ0hBTkdFKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvblJlc2l6ZT17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX1JFU0laRSk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25ab29tU3RhcnQ9eygpID0+IHtcclxuICAgICAgICAgICAgb25NYXBFdmVudChNYXBFdmVudC5PTl9aT09NX1NUQVJUKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvbk1vdmVTdGFydD17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX01PVkVfU1RBUlQpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uWm9vbT17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX1pPT00pO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uTW92ZT17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX01PVkUpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uWm9vbUVuZD17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX1pPT01fRU5EKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvbk1vdmVFbmQ9eygpID0+IHtcclxuICAgICAgICAgICAgb25NYXBFdmVudChNYXBFdmVudC5PTl9NT1ZFKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvblVubG9hZD17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX1VOTE9BRCk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25WaWV3UmVzZXQ9eygpID0+IHtcclxuICAgICAgICAgICAgb25NYXBFdmVudChNYXBFdmVudC5PTl9WSUVXX1JFU0VUKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgPlxyXG4gICAgICAgICAge21hcFJhc3RlckxheWVycy5sZW5ndGggPT09IDEgPyAoXHJcbiAgICAgICAgICAgIDxSYXN0ZXJMYXllclxyXG4gICAgICAgICAgICAgIGxheWVyPXttYXBSYXN0ZXJMYXllcnNbMF19XHJcbiAgICAgICAgICAgICAgYWRkRGVidWdNZXNzYWdlPXthZGREZWJ1Z01lc3NhZ2V9XHJcbiAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICApIDogKFxyXG4gICAgICAgICAgICA8TGF5ZXJzQ29udHJvbCBwb3NpdGlvbj1cInRvcHJpZ2h0XCI+XHJcbiAgICAgICAgICAgICAgPENvbnRyb2xzTGF5ZXJcclxuICAgICAgICAgICAgICAgIG1hcFJhc3RlckxheWVycz17bWFwUmFzdGVyTGF5ZXJzfVxyXG4gICAgICAgICAgICAgICAgYWRkRGVidWdNZXNzYWdlPXthZGREZWJ1Z01lc3NhZ2V9XHJcbiAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgPC9MYXllcnNDb250cm9sPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICAgIHsvKiBpc0xvYWRlZCAmJiAoXHJcbiAgICAgICAgICAgIDxMYXllcnNDb250cm9sIHBvc2l0aW9uPVwidG9wbGVmdFwiPlxyXG4gICAgICAgICAgICAgIDxMYXllcnNDb250cm9sLk92ZXJsYXkgbmFtZT1cIk1hcmtlcnNcIiBjaGVja2VkPXt0cnVlfT5cclxuICAgICAgICAgICAgICAgIHtpc0xvYWRlZCAmJiAoXHJcbiAgICAgICAgICAgICAgICAgIDxNYXBNYXJrZXJzXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwTWFya2Vycz17bWFwTWFya2Vyc31cclxuICAgICAgICAgICAgICAgICAgICBvbk1hcEV2ZW50PXtvbk1hcEV2ZW50fVxyXG4gICAgICAgICAgICAgICAgICAgIHVzZU1hcmtlckNsdXN0ZXJpbmc9e3RydWV9XHJcbiAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICApfVxyXG4gICAgICAgICAgICAgIDwvTGF5ZXJzQ29udHJvbC5PdmVybGF5PlxyXG4gICAgICAgICAgICA8L0xheWVyc0NvbnRyb2w+XHJcbiAgICAgICAgICApICovfVxyXG4gICAgICAgICAge2lzTG9hZGVkICYmICEhdmVjdG9yTGF5ZXJzLmxlbmd0aCAmJiAoXHJcbiAgICAgICAgICAgIDxWZWN0b3JMYXllcnNcclxuICAgICAgICAgICAgICBhZGREZWJ1Z01lc3NhZ2U9e2FkZERlYnVnTWVzc2FnZX1cclxuICAgICAgICAgICAgICBkZWJ1Z01lc3NhZ2VzPXtkZWJ1Z01lc3NhZ2VzfVxyXG4gICAgICAgICAgICAgIHZlY3RvckxheWVycz17dmVjdG9yTGF5ZXJzfVxyXG4gICAgICAgICAgICAvPlxyXG4gICAgICAgICAgKX1cclxuICAgICAgICA8L01hcD5cclxuICAgICAgKX1cclxuICAgICAge1NIT1dfREVCVUdfSU5GT1JNQVRJT04gPyAoXHJcbiAgICAgICAgPGRpdlxyXG4gICAgICAgICAgc3R5bGU9e3tcclxuICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnb3JhbmdlJyxcclxuICAgICAgICAgICAgbWF4SGVpZ2h0OiAnMjAwcHgnLFxyXG4gICAgICAgICAgICBvdmVyZmxvdzogJ2F1dG8nLFxyXG4gICAgICAgICAgICBwYWRkaW5nOiA1LFxyXG4gICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcclxuICAgICAgICAgICAgYm90dG9tOiAwLFxyXG4gICAgICAgICAgICBsZWZ0OiAwLFxyXG4gICAgICAgICAgICByaWdodDogMCxcclxuICAgICAgICAgICAgekluZGV4OiAxNTAwMFxyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIGlkPVwibWVzc2FnZXNcIlxyXG4gICAgICAgID5cclxuICAgICAgICAgIDx1bD5cclxuICAgICAgICAgICAge2RlYnVnTWVzc2FnZXMubWFwKChtZXNzYWdlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgIHJldHVybiA8bGkga2V5PXtpbmRleH0+e21lc3NhZ2V9PC9saT47XHJcbiAgICAgICAgICAgIH0pfVxyXG4gICAgICAgICAgPC91bD5cclxuICAgICAgICA8L2Rpdj5cclxuICAgICAgKSA6IG51bGx9XHJcbiAgICA8Lz5cclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTWFwQ29tcG9uZW50VmlldztcclxuIl19