"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var React = require("react");
var react_leaflet_1 = require("react-leaflet");
var models_1 = require("./models");
var ControlsLayer_1 = require("./ControlsLayer");
var RasterLayer_1 = require("./RasterLayer");
require("leaflet/dist/leaflet.css");
require("leaflet/dist/images/marker-icon-2x.png");
require("leaflet/dist/images/marker-shadow.png");
require("./markers.css");
var VectorLayers_1 = require("./VectorLayers");
var Markers_1 = require("./Markers");
require('react-leaflet-markercluster/dist/styles.min.css');
var SHOW_DEBUG_INFORMATION = true;
var ENABLE_BROWSER_TESTING = true;
var MapComponentView = function (_a) {
    var addDebugMessage = _a.addDebugMessage, vectorLayers = _a.vectorLayers, boundsOptions = _a.boundsOptions, bounds = _a.bounds, panToLocation = _a.panToLocation, showZoomControl = _a.showZoomControl, showAttributionControl = _a.showAttributionControl, mapCenterCoords = _a.mapCenterCoords, debugMessages = _a.debugMessages, isLoaded = _a.isLoaded, lat = _a.lat, lng = _a.lng, _b = _a.mapRasterLayers, mapRasterLayers = _b === void 0 ? [] : _b, _c = _a.mapMarkers, mapMarkers = _c === void 0 ? [] : _c, onClick = _a.onClick, onWhenReady = _a.onWhenReady, onMapEvent = _a.onMapEvent, onMapRef = _a.onMapRef, ownPositionMarker = _a.ownPositionMarker, useMarkerClustering = _a.useMarkerClustering, zoom = _a.zoom;
    return (React.createElement(React.Fragment, null,
        mapRasterLayers.length < 1 ? (React.createElement("div", null, "waiting for map layers")) : (React.createElement(react_leaflet_1.Map, { style: {
                width: '100%',
                backgroundColor: 'lightblue'
            }, zoom: zoom, ref: function (component) {
                onMapRef(component);
            }, center: mapCenterCoords, attributionControl: showAttributionControl, zoomControl: showZoomControl, panToLocation: panToLocation, maxZoom: 18, bounds: bounds, boundsOptions: boundsOptions, whenReady: onWhenReady, onClick: onClick, onZoomLevelsChange: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM_LEVELS_CHANGE);
            }, onResize: function () {
                onMapEvent(models_1.MapEvent.ON_RESIZE);
            }, onZoomStart: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM_START);
            }, onMoveStart: function () {
                onMapEvent(models_1.MapEvent.ON_MOVE_START);
            }, onZoom: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM);
            }, onMove: function () {
                onMapEvent(models_1.MapEvent.ON_MOVE);
            }, onZoomEnd: function () {
                onMapEvent(models_1.MapEvent.ON_ZOOM_END);
            }, onMoveEnd: function () {
                onMapEvent(models_1.MapEvent.ON_MOVE);
            }, onUnload: function () {
                onMapEvent(models_1.MapEvent.ON_UNLOAD);
            }, onViewReset: function () {
                onMapEvent(models_1.MapEvent.ON_VIEW_RESET);
            } },
            mapRasterLayers.length === 1 ? (React.createElement(RasterLayer_1.default, { layer: mapRasterLayers[0], addDebugMessage: addDebugMessage })) : (React.createElement(react_leaflet_1.LayersControl, { position: "topright" },
                React.createElement(ControlsLayer_1.default, { mapRasterLayers: mapRasterLayers, addDebugMessage: addDebugMessage }))),
            isLoaded && (React.createElement(react_leaflet_1.LayersControl, { position: "topleft" },
                React.createElement(react_leaflet_1.LayersControl.Overlay, { name: "Markers", checked: true },
                    isLoaded && React.createElement(VectorLayers_1.default, { vectorLayers: vectorLayers }),
                    isLoaded && (React.createElement(Markers_1.default, { mapMarkers: mapMarkers, onMapEvent: onMapEvent, useMarkerClustering: true }))))))),
        SHOW_DEBUG_INFORMATION ? (React.createElement("div", { style: {
                backgroundColor: 'orange',
                maxHeight: '200px',
                overflow: 'auto',
                padding: 5,
                position: 'fixed',
                bottom: 0,
                left: 0,
                right: 0,
                zIndex: 15000
            }, id: "messages" },
            React.createElement("ul", null, debugMessages.map(function (message, index) {
                return React.createElement("li", { key: index }, message);
            })))) : null));
};
exports.default = MapComponentView;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWFwQ29tcG9uZW50LnZpZXcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9wcmVjb21waWxlL01hcENvbXBvbmVudC52aWV3LnRzeCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDZCQUErQjtBQUMvQiwrQ0FBd0U7QUFFeEUsbUNBU2tCO0FBQ2xCLGlEQUE0QztBQUM1Qyw2Q0FBd0M7QUFDeEMsb0NBQWtDO0FBQ2xDLGtEQUFnRDtBQUNoRCxpREFBK0M7QUFDL0MseUJBQXVCO0FBQ3ZCLCtDQUEwQztBQUMxQyxxQ0FBbUM7QUFFbkMsT0FBTyxDQUFDLGlEQUFpRCxDQUFDLENBQUM7QUErQjNELElBQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDO0FBQ3BDLElBQU0sc0JBQXNCLEdBQUcsSUFBSSxDQUFDO0FBRXBDLElBQU0sZ0JBQWdCLEdBQUcsVUFBQyxFQXNCbEI7UUFyQk4sb0NBQWUsRUFDZiw4QkFBWSxFQUNaLGdDQUFhLEVBQ2Isa0JBQU0sRUFDTixnQ0FBYSxFQUNiLG9DQUFlLEVBQ2Ysa0RBQXNCLEVBQ3RCLG9DQUFlLEVBQ2YsZ0NBQWEsRUFDYixzQkFBUSxFQUNSLFlBQUcsRUFDSCxZQUFHLEVBQ0gsdUJBQW9CLEVBQXBCLHlDQUFvQixFQUNwQixrQkFBZSxFQUFmLG9DQUFlLEVBQ2Ysb0JBQU8sRUFDUCw0QkFBVyxFQUNYLDBCQUFVLEVBQ1Ysc0JBQVEsRUFDUix3Q0FBaUIsRUFDakIsNENBQW1CLEVBQ25CLGNBQUk7SUFFSixPQUFPLENBQ0w7UUFDRyxlQUFlLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FDNUIsMERBQWlDLENBQ2xDLENBQUMsQ0FBQyxDQUFDLENBQ0Ysb0JBQUMsbUJBQUcsSUFDRixLQUFLLEVBQUU7Z0JBQ0wsS0FBSyxFQUFFLE1BQU07Z0JBQ2IsZUFBZSxFQUFFLFdBQVc7YUFDN0IsRUFDRCxJQUFJLEVBQUUsSUFBSSxFQUNWLEdBQUcsRUFBRSxVQUFDLFNBQVM7Z0JB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QUs7Z0JBQ2hDLE9BQU8sNEJBQUksR0FBRyxFQUFFLEtBQUssSUFBRyxPQUFPLENBQU0sQ0FBQztZQUN4QyxDQUFDLENBQUMsQ0FDQyxDQUNELENBQ1AsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUNQLENBQ0osQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLGtCQUFlLGdCQUFnQixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgeyBNYXAsIExheWVyc0NvbnRyb2wsIFBvbHlsaW5lLCBUaWxlTGF5ZXIgfSBmcm9tICdyZWFjdC1sZWFmbGV0JztcclxuaW1wb3J0IHsgTGF0TG5nRXhwcmVzc2lvbiwgTGVhZmxldE1vdXNlRXZlbnQgfSBmcm9tICdsZWFmbGV0JztcclxuaW1wb3J0IHtcclxuICBNYXBNYXJrZXIsXHJcbiAgTWFwRXZlbnQsXHJcbiAgTWFwVmVjdG9yTGF5ZXJDaXJjbGUsXHJcbiAgTWFwVmVjdG9yTGF5ZXJDaXJjbGVNYXJrZXIsXHJcbiAgTWFwVmVjdG9yTGF5ZXJQb2x5bGluZSxcclxuICBNYXBWZWN0b3JMYXllclBvbHlnb24sXHJcbiAgTWFwVmVjdG9yTGF5ZXJSZWN0YW5nbGUsXHJcbiAgTWFwUmFzdGVyTGF5ZXJcclxufSBmcm9tICcuL21vZGVscyc7XHJcbmltcG9ydCBDb250cm9sc0xheWVyIGZyb20gJy4vQ29udHJvbHNMYXllcic7XHJcbmltcG9ydCBSYXN0ZXJMYXllciBmcm9tICcuL1Jhc3RlckxheWVyJztcclxuaW1wb3J0ICdsZWFmbGV0L2Rpc3QvbGVhZmxldC5jc3MnO1xyXG5pbXBvcnQgJ2xlYWZsZXQvZGlzdC9pbWFnZXMvbWFya2VyLWljb24tMngucG5nJztcclxuaW1wb3J0ICdsZWFmbGV0L2Rpc3QvaW1hZ2VzL21hcmtlci1zaGFkb3cucG5nJztcclxuaW1wb3J0ICcuL21hcmtlcnMuY3NzJztcclxuaW1wb3J0IFZlY3RvckxheWVycyBmcm9tICcuL1ZlY3RvckxheWVycyc7XHJcbmltcG9ydCBNYXBNYXJrZXJzIGZyb20gJy4vTWFya2Vycyc7XHJcblxyXG5yZXF1aXJlKCdyZWFjdC1sZWFmbGV0LW1hcmtlcmNsdXN0ZXIvZGlzdC9zdHlsZXMubWluLmNzcycpO1xyXG5cclxuaW50ZXJmYWNlIFByb3BzIHtcclxuICBhZGREZWJ1Z01lc3NhZ2U6IChtc2c6IGFueSkgPT4gdm9pZDtcclxuXHJcbiAgYm91bmRzT3B0aW9uczogYW55O1xyXG4gIGJvdW5kczogYW55O1xyXG4gIHBhblRvTG9jYXRpb246IGFueTtcclxuICBzaG93Wm9vbUNvbnRyb2w6IGJvb2xlYW47XHJcbiAgc2hvd0F0dHJpYnV0aW9uQ29udHJvbDogYm9vbGVhbjtcclxuICBtYXBDZW50ZXJDb29yZHM6IExhdExuZ0V4cHJlc3Npb247XHJcbiAgZGVidWdNZXNzYWdlczogc3RyaW5nW107XHJcbiAgaXNMb2FkZWQ6IGJvb2xlYW47XHJcbiAgbGF0OiBudW1iZXI7XHJcbiAgbG5nOiBudW1iZXI7XHJcbiAgbWFwUmFzdGVyTGF5ZXJzPzogTWFwUmFzdGVyTGF5ZXJbXTtcclxuICBtYXBNYXJrZXJzPzogTWFwTWFya2VyW107XHJcbiAgb25DbGljazogKGV2ZW50OiBMZWFmbGV0TW91c2VFdmVudCkgPT4gdm9pZDtcclxuICBvbk1hcEV2ZW50OiAobWFwRXZlbnQ6IE1hcEV2ZW50KSA9PiB2b2lkO1xyXG4gIG9uTWFwUmVmOiAobWFwUmVmOiBhbnkpID0+IHZvaWQ7XHJcbiAgb25XaGVuUmVhZHk6ICgpID0+IHZvaWQ7XHJcbiAgb3duUG9zaXRpb25NYXJrZXI6IE1hcE1hcmtlcjtcclxuICB1c2VNYXJrZXJDbHVzdGVyaW5nOiBib29sZWFuO1xyXG4gIHZlY3RvckxheWVyczogKFxyXG4gICAgfCBNYXBWZWN0b3JMYXllckNpcmNsZVxyXG4gICAgfCBNYXBWZWN0b3JMYXllckNpcmNsZU1hcmtlclxyXG4gICAgfCBNYXBWZWN0b3JMYXllclBvbHlsaW5lXHJcbiAgICB8IE1hcFZlY3RvckxheWVyUG9seWdvblxyXG4gICAgfCBNYXBWZWN0b3JMYXllclJlY3RhbmdsZSlbXTtcclxuICB6b29tOiBudW1iZXI7XHJcbn1cclxuY29uc3QgU0hPV19ERUJVR19JTkZPUk1BVElPTiA9IHRydWU7XHJcbmNvbnN0IEVOQUJMRV9CUk9XU0VSX1RFU1RJTkcgPSB0cnVlO1xyXG5cclxuY29uc3QgTWFwQ29tcG9uZW50VmlldyA9ICh7XHJcbiAgYWRkRGVidWdNZXNzYWdlLFxyXG4gIHZlY3RvckxheWVycyxcclxuICBib3VuZHNPcHRpb25zLFxyXG4gIGJvdW5kcyxcclxuICBwYW5Ub0xvY2F0aW9uLFxyXG4gIHNob3dab29tQ29udHJvbCxcclxuICBzaG93QXR0cmlidXRpb25Db250cm9sLFxyXG4gIG1hcENlbnRlckNvb3JkcyxcclxuICBkZWJ1Z01lc3NhZ2VzLFxyXG4gIGlzTG9hZGVkLFxyXG4gIGxhdCxcclxuICBsbmcsXHJcbiAgbWFwUmFzdGVyTGF5ZXJzID0gW10sXHJcbiAgbWFwTWFya2VycyA9IFtdLFxyXG4gIG9uQ2xpY2ssXHJcbiAgb25XaGVuUmVhZHksXHJcbiAgb25NYXBFdmVudCxcclxuICBvbk1hcFJlZixcclxuICBvd25Qb3NpdGlvbk1hcmtlcixcclxuICB1c2VNYXJrZXJDbHVzdGVyaW5nLFxyXG4gIHpvb21cclxufTogUHJvcHMpID0+IHtcclxuICByZXR1cm4gKFxyXG4gICAgPD5cclxuICAgICAge21hcFJhc3RlckxheWVycy5sZW5ndGggPCAxID8gKFxyXG4gICAgICAgIDxkaXY+d2FpdGluZyBmb3IgbWFwIGxheWVyczwvZGl2PlxyXG4gICAgICApIDogKFxyXG4gICAgICAgIDxNYXBcclxuICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ2xpZ2h0Ymx1ZSdcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICB6b29tPXt6b29tfVxyXG4gICAgICAgICAgcmVmPXsoY29tcG9uZW50KSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwUmVmKGNvbXBvbmVudCk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgY2VudGVyPXttYXBDZW50ZXJDb29yZHN9XHJcbiAgICAgICAgICBhdHRyaWJ1dGlvbkNvbnRyb2w9e3Nob3dBdHRyaWJ1dGlvbkNvbnRyb2x9XHJcbiAgICAgICAgICB6b29tQ29udHJvbD17c2hvd1pvb21Db250cm9sfVxyXG4gICAgICAgICAgcGFuVG9Mb2NhdGlvbj17cGFuVG9Mb2NhdGlvbn1cclxuICAgICAgICAgIG1heFpvb209ezE4fVxyXG4gICAgICAgICAgYm91bmRzPXtib3VuZHN9XHJcbiAgICAgICAgICBib3VuZHNPcHRpb25zPXtib3VuZHNPcHRpb25zfVxyXG4gICAgICAgICAgd2hlblJlYWR5PXtvbldoZW5SZWFkeX1cclxuICAgICAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XHJcbiAgICAgICAgICBvblpvb21MZXZlbHNDaGFuZ2U9eygpID0+IHtcclxuICAgICAgICAgICAgb25NYXBFdmVudChNYXBFdmVudC5PTl9aT09NX0xFVkVMU19DSEFOR0UpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uUmVzaXplPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwRXZlbnQoTWFwRXZlbnQuT05fUkVTSVpFKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvblpvb21TdGFydD17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX1pPT01fU1RBUlQpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uTW92ZVN0YXJ0PXsoKSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwRXZlbnQoTWFwRXZlbnQuT05fTU9WRV9TVEFSVCk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25ab29tPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwRXZlbnQoTWFwRXZlbnQuT05fWk9PTSk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25Nb3ZlPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwRXZlbnQoTWFwRXZlbnQuT05fTU9WRSk7XHJcbiAgICAgICAgICB9fVxyXG4gICAgICAgICAgb25ab29tRW5kPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwRXZlbnQoTWFwRXZlbnQuT05fWk9PTV9FTkQpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uTW92ZUVuZD17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX01PVkUpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICAgIG9uVW5sb2FkPXsoKSA9PiB7XHJcbiAgICAgICAgICAgIG9uTWFwRXZlbnQoTWFwRXZlbnQuT05fVU5MT0FEKTtcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBvblZpZXdSZXNldD17KCkgPT4ge1xyXG4gICAgICAgICAgICBvbk1hcEV2ZW50KE1hcEV2ZW50Lk9OX1ZJRVdfUkVTRVQpO1xyXG4gICAgICAgICAgfX1cclxuICAgICAgICA+XHJcbiAgICAgICAgICB7bWFwUmFzdGVyTGF5ZXJzLmxlbmd0aCA9PT0gMSA/IChcclxuICAgICAgICAgICAgPFJhc3RlckxheWVyXHJcbiAgICAgICAgICAgICAgbGF5ZXI9e21hcFJhc3RlckxheWVyc1swXX1cclxuICAgICAgICAgICAgICBhZGREZWJ1Z01lc3NhZ2U9e2FkZERlYnVnTWVzc2FnZX1cclxuICAgICAgICAgICAgLz5cclxuICAgICAgICAgICkgOiAoXHJcbiAgICAgICAgICAgIDxMYXllcnNDb250cm9sIHBvc2l0aW9uPVwidG9wcmlnaHRcIj5cclxuICAgICAgICAgICAgICA8Q29udHJvbHNMYXllclxyXG4gICAgICAgICAgICAgICAgbWFwUmFzdGVyTGF5ZXJzPXttYXBSYXN0ZXJMYXllcnN9XHJcbiAgICAgICAgICAgICAgICBhZGREZWJ1Z01lc3NhZ2U9e2FkZERlYnVnTWVzc2FnZX1cclxuICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICA8L0xheWVyc0NvbnRyb2w+XHJcbiAgICAgICAgICApfVxyXG4gICAgICAgICAge2lzTG9hZGVkICYmIChcclxuICAgICAgICAgICAgPExheWVyc0NvbnRyb2wgcG9zaXRpb249XCJ0b3BsZWZ0XCI+XHJcbiAgICAgICAgICAgICAgPExheWVyc0NvbnRyb2wuT3ZlcmxheSBuYW1lPVwiTWFya2Vyc1wiIGNoZWNrZWQ9e3RydWV9PlxyXG4gICAgICAgICAgICAgICAge2lzTG9hZGVkICYmIDxWZWN0b3JMYXllcnMgdmVjdG9yTGF5ZXJzPXt2ZWN0b3JMYXllcnN9IC8+fVxyXG4gICAgICAgICAgICAgICAge2lzTG9hZGVkICYmIChcclxuICAgICAgICAgICAgICAgICAgPE1hcE1hcmtlcnNcclxuICAgICAgICAgICAgICAgICAgICBtYXBNYXJrZXJzPXttYXBNYXJrZXJzfVxyXG4gICAgICAgICAgICAgICAgICAgIG9uTWFwRXZlbnQ9e29uTWFwRXZlbnR9XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlTWFya2VyQ2x1c3RlcmluZz17dHJ1ZX1cclxuICAgICAgICAgICAgICAgICAgLz5cclxuICAgICAgICAgICAgICAgICl9XHJcbiAgICAgICAgICAgICAgPC9MYXllcnNDb250cm9sLk92ZXJsYXk+XHJcbiAgICAgICAgICAgIDwvTGF5ZXJzQ29udHJvbD5cclxuICAgICAgICAgICl9XHJcbiAgICAgICAgPC9NYXA+XHJcbiAgICAgICl9XHJcbiAgICAgIHtTSE9XX0RFQlVHX0lORk9STUFUSU9OID8gKFxyXG4gICAgICAgIDxkaXZcclxuICAgICAgICAgIHN0eWxlPXt7XHJcbiAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ29yYW5nZScsXHJcbiAgICAgICAgICAgIG1heEhlaWdodDogJzIwMHB4JyxcclxuICAgICAgICAgICAgb3ZlcmZsb3c6ICdhdXRvJyxcclxuICAgICAgICAgICAgcGFkZGluZzogNSxcclxuICAgICAgICAgICAgcG9zaXRpb246ICdmaXhlZCcsXHJcbiAgICAgICAgICAgIGJvdHRvbTogMCxcclxuICAgICAgICAgICAgbGVmdDogMCxcclxuICAgICAgICAgICAgcmlnaHQ6IDAsXHJcbiAgICAgICAgICAgIHpJbmRleDogMTUwMDBcclxuICAgICAgICAgIH19XHJcbiAgICAgICAgICBpZD1cIm1lc3NhZ2VzXCJcclxuICAgICAgICA+XHJcbiAgICAgICAgICA8dWw+XHJcbiAgICAgICAgICAgIHtkZWJ1Z01lc3NhZ2VzLm1hcCgobWVzc2FnZSwgaW5kZXgpID0+IHtcclxuICAgICAgICAgICAgICByZXR1cm4gPGxpIGtleT17aW5kZXh9PnttZXNzYWdlfTwvbGk+O1xyXG4gICAgICAgICAgICB9KX1cclxuICAgICAgICAgIDwvdWw+XHJcbiAgICAgICAgPC9kaXY+XHJcbiAgICAgICkgOiBudWxsfVxyXG4gICAgPC8+XHJcbiAgKTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IE1hcENvbXBvbmVudFZpZXc7XHJcbiJdfQ==